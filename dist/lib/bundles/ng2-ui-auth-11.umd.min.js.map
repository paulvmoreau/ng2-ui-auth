{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ng2-ui-auth-11/src/lib/utils.ts","../../../projects/ng2-ui-auth-11/src/lib/storage-type.enum.ts","../../../projects/ng2-ui-auth-11/src/lib/config-providers.ts","../../../projects/ng2-ui-auth-11/src/lib/config.service.ts","../../../projects/ng2-ui-auth-11/src/lib/storage-service.ts","../../../projects/ng2-ui-auth-11/src/lib/browser-storage.service.ts","../../../projects/ng2-ui-auth-11/src/lib/shared.service.ts","../../../projects/ng2-ui-auth-11/src/lib/interceptor.service.ts","../../../projects/ng2-ui-auth-11/src/lib/popup.service.ts","../../../projects/ng2-ui-auth-11/src/lib/oauth1.service.ts","../../../projects/ng2-ui-auth-11/src/lib/oauth2.service.ts","../../../projects/ng2-ui-auth-11/src/lib/oauth.service.ts","../../../projects/ng2-ui-auth-11/src/lib/local.service.ts","../../../projects/ng2-ui-auth-11/src/lib/auth.service.ts","../../../projects/ng2-ui-auth-11/src/lib/ng2-ui-auth-11.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","create","__read","o","n","m","Symbol","iterator","r","e","i","ar","next","done","push","value","error","__spread","arguments","length","concat","joinUrl","baseUrl","url","test","join","replace","buildQueryString","obj","keys","map","key","encodeURIComponent","getWindowOrigin","w","window","location","origin","protocol","hostname","port","StorageType","defaultProviders","facebook","name","redirectUri","authorizationEndpoint","additionalUrlParams","display","scope","scopeDelimiter","oauthType","popupOptions","width","height","google","prompt","undefined","login_hint","access_type","include_granted_scopes","openid.realm","hd","state","Math","random","toString","substr","github","instagram","linkedin","twitter","twitch","live","yahoo","bitbucket","spotify","CONFIG_OPTIONS","InjectionToken","ConfigService","options","this","withCredentials","tokenRoot","loginUrl","signupUrl","unlinkUrl","tokenName","tokenSeparator","tokenPrefix","authHeader","authToken","storageType","LOCAL_STORAGE","cordova","resolveToken","response","config","accessToken","access_token","token","data","tokenRootData","split","reduce","x","providers","assign","mergeWithDefaultProviders","updateProviders","_this","forEach","Injectable","Inject","args","BrowserStorageService","_super","store","MEMORY","updateStorageType","console","warn","TypeError","String","__","constructor","__extends","checkIsStorageAvailable","get","COOKIE","SESSION_COOKIE","getCookie","SESSION_STORAGE","getItem","NONE","set","date","setCookie","setItem","remove","removeCookie","removeItem","isCookieStorageAvailable","isWindowStorageAvailable","supported","substring","document","Date","now","toUTCString","expires","path","cookie","RegExp","StorageService","SharedService","storage","getToken","getPayload","base64","JSON","parse","b64DecodeUnicode","setToken","expDate","getExpirationDate","removeToken","isAuthenticated","exp","round","getTime","payload","setUTCSeconds","logout","Observable","observer","complete","setStorageType","type","str","decodeURIComponent","atob","c","charCodeAt","slice","JwtInterceptor","shared","intercept","req","_b","newReq","headers","has","clone","setHeaders","_a","handle","PopupService","open","isCordovaApp","stringifiedOptions","stringifyOptions","prepareOptions","windowName","popupWindow","focus","of","empty","waitForClose","eventListener","pollPopup","Error","merge","fromEvent","pipe","delay","switchMap","event","closed","throw","indexOf","parser","createElement","href","search","hash","queryParams","hashParams","parseQueryString","qs","allParams","close","take","interval","throwError","popupWindowOrigin","left","screenX","outerWidth","top","screenY","outerHeight","toolbar","visibleToolbar","joinedKeyValue","keyValue","URL","Oauth1Service","http","popup","oauthOptions","userData","serverUrl","post","tap","authorizationData","oauthData","exchangeForToken","body","method","exchangeForTokenUrl","request","HttpClient","Oauth2Service","getAuthorizationData","responseType","clientId","_c","resolvedState","filter","_","acc","OauthService","depProviders","provide","useValue","deps","authenticate","Injector","unlink","provider","LocalService","login","user","signup","AuthService","local","oauth","link","Ng2UiAuth11Module","forRoot","configOptions","defaultJwtInterceptor","ngModule","useClass","HTTP_INTERCEPTORS","multi","NgModule","imports","HttpClientModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { HttpHeaders, HttpParams } from '@angular/common/http';\n\n/**\n * Created by Ron on 17/12/2015.\n */\n\nexport function joinUrl(baseUrl: string, url: string) {\n  if (/^(?:[a-z]+:)?\\/\\//i.test(url)) {\n    return url;\n  }\n\n  const joined = [baseUrl, url].join('/');\n\n  return joined\n    .replace(/[\\/]+/g, '/')\n    .replace(/\\/\\?/g, '?')\n    .replace(/\\/\\#/g, '#')\n    .replace(/\\:\\//g, '://');\n}\n\nexport function buildQueryString(obj: object) {\n  return Object.keys(obj)\n    .map(key => (!!obj[key] ? `${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}` : key))\n    .join('&');\n}\n\nexport function getWindowOrigin(w?: Window) {\n  if (!w && typeof window !== 'undefined') {\n    w = window;\n  }\n  try {\n    if (!w || !w.location) {\n      return null;\n    }\n    if (!w.location.origin) {\n      return `${w.location.protocol}//${w.location.hostname}${w.location.port ? ':' + w.location.port : ''}`;\n    }\n    return w.location.origin;\n  } catch (error) {\n    return null;\n    // ignore DOMException: Blocked a frame with origin from accessing a cross-origin frame.\n    // error instanceof DOMException && error.name === 'SecurityError'\n  }\n}\n","export enum StorageType {\n  NONE = 'none',\n  MEMORY = 'memory',\n  LOCAL_STORAGE = 'localStorage',\n  SESSION_STORAGE = 'sessionStorage',\n  COOKIE = 'cookie',\n  SESSION_COOKIE = 'sessionCookie'\n}\n","import { IProviders } from '../public_api';\nimport { getWindowOrigin } from './utils';\n\nexport const defaultProviders: IProviders = {\n  facebook: {\n    name: 'facebook',\n    url: '/auth/facebook',\n    redirectUri: `${getWindowOrigin()}/`,\n    authorizationEndpoint: 'https://www.facebook.com/v2.5/dialog/oauth',\n    additionalUrlParams: {\n      display: 'popup'\n    },\n    scope: ['email'],\n    scopeDelimiter: ',',\n    oauthType: '2.0',\n    popupOptions: { width: 580, height: 400 }\n  },\n  google: {\n    name: 'google',\n    url: '/auth/google',\n    authorizationEndpoint: 'https://accounts.google.com/o/oauth2/v2/auth',\n    additionalUrlParams: {\n      display: 'popup',\n      prompt: undefined,\n      login_hint: undefined,\n      access_type: undefined,\n      include_granted_scopes: undefined,\n      'openid.realm': undefined,\n      hd: undefined\n    },\n    scope: ['openid', 'email'],\n    scopeDelimiter: ' ',\n    oauthType: '2.0',\n    popupOptions: { width: 452, height: 633 },\n    state: () =>\n      encodeURIComponent(\n        Math.random()\n          .toString(36)\n          .substr(2)\n      )\n  },\n  github: {\n    name: 'github',\n    url: '/auth/github',\n    authorizationEndpoint: 'https://github.com/login/oauth/authorize',\n    scope: ['user:email'],\n    scopeDelimiter: ' ',\n    oauthType: '2.0',\n    popupOptions: { width: 1020, height: 618 }\n  },\n  instagram: {\n    name: 'instagram',\n    url: '/auth/instagram',\n    authorizationEndpoint: 'https://api.instagram.com/oauth/authorize',\n    scope: ['basic'],\n    scopeDelimiter: '+',\n    oauthType: '2.0'\n  },\n  linkedin: {\n    name: 'linkedin',\n    url: '/auth/linkedin',\n    authorizationEndpoint: 'https://www.linkedin.com/uas/oauth2/authorization',\n    scope: ['r_emailaddress'],\n    scopeDelimiter: ' ',\n    oauthType: '2.0',\n    popupOptions: { width: 527, height: 582 },\n    state: 'STATE'\n  },\n  twitter: {\n    name: 'twitter',\n    url: '/auth/twitter',\n    authorizationEndpoint: 'https://api.twitter.com/oauth/authenticate',\n    oauthType: '1.0',\n    popupOptions: { width: 495, height: 645 }\n  },\n  twitch: {\n    name: 'twitch',\n    url: '/auth/twitch',\n    authorizationEndpoint: 'https://api.twitch.tv/kraken/oauth2/authorize',\n    scope: ['user_read'],\n    scopeDelimiter: ' ',\n    additionalUrlParams: {\n      display: 'popup'\n    },\n    oauthType: '2.0',\n    popupOptions: { width: 500, height: 560 }\n  },\n  live: {\n    name: 'live',\n    url: '/auth/live',\n    authorizationEndpoint: 'https://login.live.com/oauth20_authorize.srf',\n    additionalUrlParams: {\n      display: 'popup'\n    },\n    scope: ['wl.emails'],\n    scopeDelimiter: ' ',\n    oauthType: '2.0',\n    popupOptions: { width: 500, height: 560 }\n  },\n  yahoo: {\n    name: 'yahoo',\n    url: '/auth/yahoo',\n    authorizationEndpoint: 'https://api.login.yahoo.com/oauth2/request_auth',\n    scope: [],\n    scopeDelimiter: ',',\n    oauthType: '2.0',\n    popupOptions: { width: 559, height: 519 }\n  },\n  bitbucket: {\n    name: 'bitbucket',\n    url: '/auth/bitbucket',\n    authorizationEndpoint: 'https://bitbucket.org/site/oauth2/authorize',\n    redirectUri: `${getWindowOrigin()}/`,\n    scope: ['email'],\n    scopeDelimiter: ',',\n    oauthType: '2.0',\n    popupOptions: { width: 1028, height: 529 }\n  },\n  spotify: {\n    name: 'spotify',\n    url: '/auth/spotify',\n    authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n    scope: ['', 'user-read-email'],\n    scopeDelimiter: ',',\n    oauthType: '2.0',\n    popupOptions: { width: 500, height: 530 },\n    state: () =>\n      encodeURIComponent(\n        Math.random()\n          .toString(36)\n          .substr(2)\n      )\n  }\n};\n","import { Inject, Injectable, InjectionToken } from '@angular/core';\nimport { IConfigOptions, IPartialConfigOptions, IProviders } from './config-interfaces';\nimport { defaultProviders } from './config-providers';\nimport { StorageType } from './storage-type.enum';\n\nexport const CONFIG_OPTIONS = new InjectionToken<any>('config.options');\n@Injectable()\nexport class ConfigService {\n  public options = {\n    withCredentials: false,\n    tokenRoot: null,\n    baseUrl: '/',\n    loginUrl: '/auth/login',\n    signupUrl: '/auth/signup',\n    unlinkUrl: '/auth/unlink/',\n    tokenName: 'token',\n    tokenSeparator: '_',\n    tokenPrefix: 'ng2-ui-auth-11',\n    authHeader: 'Authorization',\n    authToken: 'Bearer',\n    storageType: StorageType.LOCAL_STORAGE,\n    cordova: undefined,\n    resolveToken: (response: any, config: IConfigOptions) => {\n      const accessToken: string | { [key: string]: string } | null | undefined =\n        response && (response.access_token || response.token || response.data);\n      if (!accessToken) {\n        // console.warn('No token found');\n        return null;\n      }\n      if (typeof accessToken === 'string') {\n        return accessToken;\n      }\n      if (typeof accessToken !== 'object') {\n        // console.warn('No token found');\n        return null;\n      }\n      const tokenRootData =\n        config.tokenRoot &&\n        config.tokenRoot.split('.').reduce((o: any, x: any) => {\n          return o[x];\n        }, accessToken);\n      const token = tokenRootData ? tokenRootData[config.tokenName] : accessToken[config.tokenName];\n      if (token) {\n        return token;\n      }\n      // const tokenPath = this.tokenRoot ? this.tokenRoot + '.' + this.tokenName : this.tokenName;\n      // console.warn('Expecting a token named \"' + tokenPath);\n      return null;\n    },\n    providers: {}\n  };\n\n  constructor(@Inject(CONFIG_OPTIONS) options: IPartialConfigOptions) {\n    this.options = {\n      ...this.options,\n      ...options\n    };\n    this.mergeWithDefaultProviders();\n  }\n\n  updateProviders(providers: IProviders) {\n    this.options.providers = {\n      ...(this.options.providers || {}),\n      ...providers\n    };\n    this.mergeWithDefaultProviders();\n  }\n\n  mergeWithDefaultProviders() {\n    Object.keys(this.options.providers).forEach(key => {\n      if (key in defaultProviders) {\n        this.options.providers[key] = {\n          ...defaultProviders[key],\n          ...this.options.providers[key]\n        };\n      }\n    });\n  }\n}\n","import { StorageType } from './storage-type.enum';\n\nexport abstract class StorageService {\n  abstract updateStorageType(storageType: StorageType): boolean;\n\n  abstract get(key: string): string;\n\n  abstract set(key: string, value: string, date: string): void;\n\n  abstract remove(key: string): void;\n}\n","import { Injectable } from '@angular/core';\nimport { StorageService } from './storage-service';\nimport { StorageType } from './storage-type.enum';\nimport { ConfigService } from './config.service';\n\n@Injectable()\nexport class BrowserStorageService extends StorageService {\n  private store: { [key: string]: string } = {};\n  private storageType = StorageType.MEMORY;\n\n  constructor(private config: ConfigService) {\n    super();\n    if (!this.updateStorageType(config.options.storageType)) {\n      console.warn(config.options.storageType + ' is not available.');\n    }\n  }\n\n  public updateStorageType(storageType: StorageType) {\n    const isStorageAvailable = this.checkIsStorageAvailable(storageType);\n    if (!isStorageAvailable) {\n      return false;\n    }\n    this.storageType = storageType;\n    return true;\n  }\n\n  public get(key: string) {\n    switch (this.storageType) {\n      case StorageType.COOKIE:\n      case StorageType.SESSION_COOKIE:\n        return this.getCookie(key);\n      case StorageType.LOCAL_STORAGE:\n      case StorageType.SESSION_STORAGE:\n        return window[this.storageType].getItem(key);\n      case StorageType.MEMORY:\n        return this.store[key];\n      case StorageType.NONE:\n      default:\n        return null;\n    }\n  }\n\n  public set(key: string, value: string, date: string) {\n    switch (this.storageType) {\n      case StorageType.COOKIE:\n      case StorageType.SESSION_COOKIE:\n        this.setCookie(key, value, this.storageType === StorageType.COOKIE ? date : '');\n        break;\n      case StorageType.LOCAL_STORAGE:\n      case StorageType.SESSION_STORAGE:\n        window[this.storageType].setItem(key, value);\n        break;\n      case StorageType.MEMORY:\n        this.store[key] = value;\n        break;\n      case StorageType.NONE:\n      default:\n        break;\n    }\n  }\n\n  public remove(key: string) {\n    switch (this.storageType) {\n      case StorageType.COOKIE:\n      case StorageType.SESSION_COOKIE:\n        this.removeCookie(key);\n        break;\n      case StorageType.LOCAL_STORAGE:\n      case StorageType.SESSION_STORAGE:\n        window[this.storageType].removeItem(key);\n        break;\n      case StorageType.MEMORY:\n        delete this.store[key];\n        break;\n      case StorageType.NONE:\n      default:\n        break;\n    }\n  }\n\n  private checkIsStorageAvailable(storageType: StorageType) {\n    switch (storageType) {\n      case StorageType.COOKIE:\n      case StorageType.SESSION_COOKIE:\n        return this.isCookieStorageAvailable();\n      case StorageType.LOCAL_STORAGE:\n      case StorageType.SESSION_STORAGE:\n        return this.isWindowStorageAvailable(storageType);\n      case StorageType.NONE:\n      case StorageType.MEMORY:\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  private isWindowStorageAvailable(storageType: StorageType.SESSION_STORAGE | StorageType.LOCAL_STORAGE) {\n    try {\n      const supported = window && storageType in window && window[storageType] !== null;\n\n      if (supported) {\n        const key = Math.random()\n          .toString(36)\n          .substring(7);\n        window[storageType].setItem(key, '');\n        window[storageType].removeItem(key);\n      }\n\n      return supported;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  private isCookieStorageAvailable() {\n    try {\n      const supported = document && 'cookie' in document;\n\n      if (supported) {\n        const key = Math.random()\n          .toString(36)\n          .substring(7);\n        this.setCookie(key, 'test', new Date(Date.now() + 60 * 1000).toUTCString());\n        const value = this.getCookie(key);\n        this.removeCookie(key);\n        return value === 'test';\n      }\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  private setCookie(key: string, value: string, expires = '', path = '/') {\n    document.cookie = `${key}=${value}${expires ? `; expires=${expires}` : ''}; path=${path}`;\n  }\n\n  private removeCookie(key: string, path = '/') {\n    this.setCookie(key, '', new Date(0).toUTCString(), path);\n  }\n\n  private getCookie(key: string) {\n    return document.cookie.replace(new RegExp(`(?:(?:^|.*;\\\\s*)${key}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`), '$1');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { StorageType } from './storage-type.enum';\nimport { Subscriber, Observable } from 'rxjs';\nimport { StorageService } from './storage-service';\nimport { ConfigService } from './config.service';\n\n@Injectable()\nexport class SharedService {\n  public tokenName = this.config.options.tokenPrefix\n    ? [this.config.options.tokenPrefix, this.config.options.tokenName].join(this.config.options.tokenSeparator)\n    : this.config.options.tokenName;\n\n  constructor(private storage: StorageService, private config: ConfigService) {}\n\n  public getToken() {\n    return this.storage.get(this.tokenName);\n  }\n\n  public getPayload(token = this.getToken()) {\n    if (token && token.split('.').length === 3) {\n      try {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        return JSON.parse(this.b64DecodeUnicode(base64));\n      } catch (e) {\n        return undefined;\n      }\n    }\n  }\n\n  public setToken(response: string | object) {\n    if (!response) {\n      // console.warn('Can\\'t set token without passing a value');\n      return;\n    }\n\n    let token: string;\n    if (typeof response === 'string') {\n      token = response;\n    } else {\n      token = this.config.options.resolveToken(response, this.config.options);\n    }\n\n    if (token) {\n      const expDate = this.getExpirationDate(token);\n      this.storage.set(this.tokenName, token, expDate ? expDate.toUTCString() : '');\n    }\n  }\n\n  public removeToken() {\n    this.storage.remove(this.tokenName);\n  }\n\n  public isAuthenticated(token = this.getToken()) {\n    // a token is present\n    if (token) {\n      // token with a valid JWT format XXX.YYY.ZZZ\n      if (token.split('.').length === 3) {\n        // could be a valid JWT or an access token with the same format\n        try {\n          const base64Url = token.split('.')[1];\n          const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n          const exp = JSON.parse(this.b64DecodeUnicode(base64)).exp;\n          // jwt with an optional expiration claims\n          if (exp) {\n            const isExpired = Math.round(new Date().getTime() / 1000) >= exp;\n            if (isExpired) {\n              // fail: Expired token\n              this.storage.remove(this.tokenName);\n              return false;\n            } else {\n              // pass: Non-expired token\n              return true;\n            }\n          }\n        } catch (e) {\n          // pass: Non-JWT token that looks like JWT\n          return true;\n        }\n      }\n      // pass: All other tokens\n      return true;\n    }\n    // lail: No token at all\n    return false;\n  }\n\n  public getExpirationDate(token = this.getToken()) {\n    const payload = this.getPayload(token);\n    if (payload && payload.exp && Math.round(new Date().getTime() / 1000) < payload.exp) {\n      const date = new Date(0);\n      date.setUTCSeconds(payload.exp);\n      return date;\n    }\n    return null;\n  }\n\n  public logout(): Observable<any> {\n    return Observable.create((observer: Subscriber<any>) => {\n      this.storage.remove(this.tokenName);\n      observer.next();\n      observer.complete();\n    });\n  }\n\n  public setStorageType(type: StorageType) {\n    return this.storage.updateStorageType(type);\n  }\n\n  private b64DecodeUnicode(str) {\n    return decodeURIComponent(Array.prototype.map.call(atob(str), c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\nimport { SharedService } from './shared.service';\nimport { ConfigService } from './config.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class JwtInterceptor implements HttpInterceptor {\n  constructor(private shared: SharedService, private config: ConfigService) {}\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const { authHeader, authToken } = this.config.options;\n    const token = this.shared.getToken();\n    const isAuthenticated = this.shared.isAuthenticated();\n    const newReq =\n      isAuthenticated && !req.headers.has(authHeader) ? req.clone({ setHeaders: { [authHeader]: `${authToken} ${token}` } }) : req;\n    return next.handle(newReq);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { empty, fromEvent, interval, merge, Observable, of, throwError } from 'rxjs';\nimport { delay, map, switchMap, take } from 'rxjs/operators';\nimport { IOauth1Options, IOauth2Options, IPopupOptions } from './config-interfaces';\nimport { getWindowOrigin } from './utils';\n\ndeclare const cordova: any;\n@Injectable()\nexport class PopupService {\n  public open(url: string, options: IOauth2Options | IOauth1Options, cordova = this.isCordovaApp()) {\n    const stringifiedOptions = this.stringifyOptions(this.prepareOptions(options.popupOptions));\n    const windowName = cordova ? '_blank' : options.name;\n\n    const popupWindow = typeof window !== 'undefined' ? window.open(url, windowName, stringifiedOptions) : null;\n\n    if (popupWindow) {\n      if (popupWindow.focus) {\n        popupWindow.focus();\n      }\n      return of(popupWindow);\n    }\n    return empty();\n  }\n\n  public waitForClose(popupWindow: Window, cordova = this.isCordovaApp(), redirectUri = getWindowOrigin()) {\n    return cordova ? this.eventListener(popupWindow, redirectUri) : this.pollPopup(popupWindow, redirectUri);\n  }\n\n  private eventListener(popupWindow: Window, redirectUri = getWindowOrigin()) {\n    if (!popupWindow) {\n      throw new Error('Popup was not created');\n    }\n    return merge(\n      fromEvent<Event>(popupWindow, 'exit').pipe(\n        delay(100),\n        map(() => {\n          throw new Error('Authentication Canceled');\n        })\n      ),\n      fromEvent(popupWindow, 'loadstart')\n    ).pipe(\n      switchMap((event: Event & { url: string }) => {\n        if (!popupWindow || popupWindow.closed) {\n          return Observable.throw(new Error('Authentication Canceled'));\n        }\n        if (event.url.indexOf(redirectUri) !== 0) {\n          return empty();\n        }\n\n        const parser = document.createElement('a');\n        parser.href = event.url;\n\n        if (parser.search || parser.hash) {\n          const queryParams = parser.search.substring(1).replace(/\\/$/, '');\n          const hashParams = parser.hash.substring(1).replace(/\\/$/, '');\n          const hash = this.parseQueryString(hashParams);\n          const qs = this.parseQueryString(queryParams);\n          const allParams = { ...qs, ...hash };\n\n          popupWindow.close();\n\n          if (allParams.error) {\n            throw allParams.error;\n          } else {\n            return of(allParams);\n          }\n        }\n        return empty();\n      }),\n      take(1)\n    );\n  }\n\n  private pollPopup(popupWindow: Window, redirectUri = getWindowOrigin()) {\n    return interval(50).pipe(\n      switchMap(() => {\n        if (!popupWindow || popupWindow.closed) {\n          return throwError(new Error('Authentication Canceled'));\n        }\n\n        const popupWindowOrigin = getWindowOrigin(popupWindow);\n\n        if (\n          popupWindowOrigin &&\n          (redirectUri.indexOf(popupWindowOrigin) === 0 || popupWindowOrigin.indexOf(redirectUri) === 0) &&\n          (popupWindow.location.search || popupWindow.location.hash)\n        ) {\n          const queryParams = popupWindow.location.search.substring(1).replace(/\\/$/, '');\n          const hashParams = popupWindow.location.hash.substring(1).replace(/[\\/$]/, '');\n          const hash = this.parseQueryString(hashParams);\n          const qs = this.parseQueryString(queryParams);\n          popupWindow.close();\n          const allParams = { ...qs, ...hash };\n          if (allParams.error) {\n            throw allParams.error;\n          } else {\n            return of(allParams);\n          }\n        }\n        return empty();\n      }),\n      take(1)\n    );\n  }\n\n  private prepareOptions(options?: IPopupOptions) {\n    options = options || {};\n    const width = options.width || 500;\n    const height = options.height || 500;\n    return {\n      width,\n      height,\n      left: window.screenX + (window.outerWidth - width) / 2,\n      top: window.screenY + (window.outerHeight - height) / 2.5,\n      toolbar: options.visibleToolbar ? 'yes' : 'no',\n      ...options\n    };\n  }\n\n  private stringifyOptions(options: { [index: string]: string | number | boolean | null | undefined }) {\n    return Object.keys(options)\n      .map(key => (options[key] === null || options[key] === undefined ? key : key + '=' + options[key]))\n      .join(',');\n  }\n\n  private parseQueryString(joinedKeyValue: string): any {\n    let key;\n    let value;\n    return joinedKeyValue.split('&').reduce(\n      (obj, keyValue) => {\n        if (keyValue) {\n          value = keyValue.split('=');\n          key = decodeURIComponent(value[0]);\n          obj[key] = typeof value[1] !== 'undefined' ? decodeURIComponent(value[1]) : true;\n        }\n        return obj;\n      },\n      {} as { [k: string]: string | true }\n    );\n  }\n\n  private isCordovaApp() {\n    return typeof cordova === 'object' || (document.URL.indexOf('http://') === -1 && document.URL.indexOf('https://') === -1);\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { IOauth1Options } from './config-interfaces';\nimport { ConfigService } from './config.service';\nimport { IOauthService } from './oauth-service';\nimport { PopupService } from './popup.service';\nimport { buildQueryString, joinUrl } from './utils';\n\n@Injectable()\nexport class Oauth1Service implements IOauthService {\n  constructor(private http: HttpClient, private popup: PopupService, private config: ConfigService) {}\n\n  open<T extends object | string = any>(oauthOptions: IOauth1Options, userData: object): Observable<T> {\n    const serverUrl = this.config.options.baseUrl ? joinUrl(this.config.options.baseUrl, oauthOptions.url) : oauthOptions.url;\n    return this.popup.open('about:blank', oauthOptions, this.config.options.cordova).pipe(\n      switchMap(popupWindow =>\n        this.http.post<object>(serverUrl, oauthOptions).pipe(\n          tap(authorizationData =>\n            popupWindow\n              ? popupWindow.location.replace([oauthOptions.authorizationEndpoint, buildQueryString(authorizationData)].join('?'))\n              : undefined\n          ),\n          switchMap(authorizationData =>\n            this.popup\n              .waitForClose(popupWindow, this.config.options.cordova, oauthOptions.redirectUri)\n              .pipe(map(oauthData => ({ authorizationData, oauthData })))\n          )\n        )\n      ),\n      switchMap(({ authorizationData, oauthData }) => this.exchangeForToken<T>(oauthOptions, authorizationData, oauthData, userData))\n    );\n  }\n\n  private exchangeForToken<T>(oauthOptions: IOauth1Options, authorizationData: object, oauthData: object, userData: object) {\n    const body = { oauthOptions, authorizationData, oauthData, userData };\n    const { withCredentials, baseUrl } = this.config.options;\n    const { method = 'POST', url } = oauthOptions;\n    const exchangeForTokenUrl = baseUrl ? joinUrl(baseUrl, url) : url;\n    return this.http.request<T>(method, exchangeForTokenUrl, { body, withCredentials });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { empty, Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { IOauth2Options } from './config-interfaces';\nimport { ConfigService } from './config.service';\nimport { IOauthService } from './oauth-service';\nimport { PopupService } from './popup.service';\nimport { buildQueryString, getWindowOrigin, joinUrl } from './utils';\n\n@Injectable()\nexport class Oauth2Service implements IOauthService {\n  constructor(private http: HttpClient, private popup: PopupService, private config: ConfigService) {}\n\n  open<T extends object | string = any>(oauthOptions: IOauth2Options, userData: object): Observable<T> {\n    const authorizationData = this.getAuthorizationData(oauthOptions);\n    const url = [oauthOptions.authorizationEndpoint, buildQueryString(authorizationData)].join('?');\n    return this.popup.open(url, oauthOptions, this.config.options.cordova).pipe(\n      switchMap((window?: Window) =>\n        window ? this.popup.waitForClose(window, this.config.options.cordova, oauthOptions.redirectUri) : empty()\n      ),\n      switchMap((oauthData: any) => {\n        // when no server URL provided, return popup params as-is.\n        // this is for a scenario when someone wishes to opt out from\n        // satellizer's magic by doing authorization code exchange and\n        // saving a token manually.\n        if (oauthOptions.responseType === 'token' || !oauthOptions.url) {\n          return of(oauthData);\n        }\n\n        if (oauthData.state && oauthData.state !== authorizationData.state) {\n          throw new Error('OAuth \"state\" mismatch');\n        }\n        return this.exchangeForToken<T>(oauthOptions, authorizationData, oauthData, userData);\n      })\n    );\n  }\n\n  private exchangeForToken<T>(options: IOauth2Options, authorizationData: object, oauthData: object, userData: object) {\n    const body = { authorizationData, oauthData, userData };\n    const { baseUrl, withCredentials } = this.config.options;\n    const { url, method = 'POST' } = options;\n    const exchangeForTokenUrl = baseUrl ? joinUrl(baseUrl, url) : url;\n    return this.http.request<T>(method, exchangeForTokenUrl, { body, withCredentials });\n  }\n\n  private getAuthorizationData(options: IOauth2Options) {\n    const {\n      responseType = 'code',\n      clientId,\n      redirectUri = getWindowOrigin() || '',\n      scopeDelimiter = ',',\n      scope,\n      state,\n      additionalUrlParams\n    } = options;\n    const resolvedState = typeof state === 'function' ? state() : state;\n    return [\n      ['response_type', responseType],\n      ['client_id', clientId],\n      ['redirect_uri', redirectUri],\n      ...(state ? [['state', resolvedState]] : []),\n      ...(scope ? [['scope', scope.join(scopeDelimiter)]] : []),\n      ...(additionalUrlParams\n        ? Object.keys(additionalUrlParams).map(key => {\n            const value: string | (() => string) | null | undefined = (additionalUrlParams as any)[key];\n            if (typeof value === 'string') {\n              return [key, value];\n            } else if (typeof value === 'function') {\n              return [key, value()];\n            } else if (value === null) {\n              return [key, ''];\n            }\n            return ['', ''];\n          })\n        : [])\n    ]\n      .filter(_ => !!_[0])\n      .reduce((acc, next) => ({ ...acc, [next[0]]: next[1] }), {} as { [key: string]: string });\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { joinUrl } from './utils';\nimport { tap } from 'rxjs/operators';\nimport { Oauth1Service } from './oauth1.service';\nimport { Oauth2Service } from './oauth2.service';\nimport { Observable } from 'rxjs';\nimport { PopupService } from './popup.service';\nimport { ConfigService } from './config.service';\nimport { SharedService } from './shared.service';\nimport { HttpClient } from '@angular/common/http';\nimport { IOauthService } from './oauth-service';\n\n@Injectable()\nexport class OauthService {\n  readonly depProviders = [\n    { provide: HttpClient, useValue: this.http },\n    { provide: PopupService, useValue: this.popup },\n    { provide: ConfigService, useValue: this.config }\n  ];\n  readonly deps = [HttpClient, PopupService, ConfigService];\n\n  constructor(private http: HttpClient, private shared: SharedService, private config: ConfigService, private popup: PopupService) {}\n\n  public authenticate<T extends object | string>(name: string, userData?: any): Observable<T> {\n    const provider: IOauthService =\n      this.config.options.providers[name].oauthType === '1.0'\n        ? Injector.create([...this.depProviders, { provide: Oauth1Service, deps: this.deps }]).get(Oauth1Service)\n        : Injector.create([...this.depProviders, { provide: Oauth2Service, deps: this.deps }]).get(Oauth2Service);\n\n    return provider.open<T>(this.config.options.providers[name], userData || {}).pipe(\n      tap(response => {\n        // this is for a scenario when someone wishes to opt out from\n        // satellizer's magic by doing authorization code exchange and\n        // saving a token manually.\n        if (this.config.options.providers[name].url) {\n          this.shared.setToken(response);\n        }\n      })\n    );\n  }\n\n  public unlink<T>(provider: string, url = joinUrl(this.config.options.baseUrl, this.config.options.unlinkUrl), method = 'POST') {\n    return this.http.request<T>(method, url, { body: { provider } });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { SharedService } from './shared.service';\nimport { ConfigService } from './config.service';\nimport { joinUrl } from './utils';\nimport { tap } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class LocalService {\n  constructor(private http: HttpClient, private shared: SharedService, private config: ConfigService) {}\n\n  public login<T extends string | object>(user: string | object, url?: string): Observable<T> {\n    return this.http\n      .post<T>(url || joinUrl(this.config.options.baseUrl, this.config.options.loginUrl), user)\n      .pipe(tap(data => this.shared.setToken(data)));\n  }\n\n  public signup<T = any>(user: string | object, url?: string): Observable<T> {\n    return this.http.post<T>(url || joinUrl(this.config.options.baseUrl, this.config.options.signupUrl), user);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { LocalService } from './local.service';\nimport { OauthService } from './oauth.service';\nimport { SharedService } from './shared.service';\nimport { StorageType } from './storage-type.enum';\n\n@Injectable()\nexport class AuthService {\n  constructor(private shared: SharedService, private local: LocalService, private oauth: OauthService) {}\n\n  public login<T extends string | object = any>(user: string | object, url?: string): Observable<T> {\n    return this.local.login<T>(user, url);\n  }\n\n  public signup<T = any>(user: string | object, url?: string): Observable<T> {\n    return this.local.signup<T>(user, url);\n  }\n\n  public logout(): Observable<void> {\n    return this.shared.logout();\n  }\n\n  public authenticate<T extends object | string = any>(name: string, userData?: any): Observable<T> {\n    return this.oauth.authenticate<T>(name, userData);\n  }\n\n  public link<T extends object | string = any>(name: string, userData?: any): Observable<T> {\n    return this.oauth.authenticate<T>(name, userData);\n  }\n\n  public unlink<T = any>(provider: string, url?: string): Observable<T> {\n    return this.oauth.unlink<T>(provider, url);\n  }\n\n  public isAuthenticated(): boolean {\n    return this.shared.isAuthenticated();\n  }\n\n  public getToken(): string | null {\n    return this.shared.getToken();\n  }\n\n  public setToken(token: string | object): void {\n    this.shared.setToken(token);\n  }\n\n  public removeToken(): void {\n    this.shared.removeToken();\n  }\n\n  public getPayload(): any {\n    return this.shared.getPayload();\n  }\n\n  public setStorageType(type: StorageType): boolean {\n    return this.shared.setStorageType(type);\n  }\n\n  public getExpirationDate(): Date | null {\n    return this.shared.getExpirationDate();\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { IConfigOptions, IPartialConfigOptions } from './config-interfaces';\nimport { CONFIG_OPTIONS, ConfigService } from './config.service';\nimport { StorageService } from './storage-service';\nimport { BrowserStorageService } from './browser-storage.service';\nimport { SharedService } from './shared.service';\nimport { JwtInterceptor } from './interceptor.service';\nimport { OauthService } from './oauth.service';\nimport { HttpClient } from '@angular/common/http';\nimport { PopupService } from './popup.service';\nimport { LocalService } from './local.service';\nimport { AuthService } from './auth.service';\n\n@NgModule({\n  imports: [HttpClientModule],\n  declarations: [],\n  exports: []\n})\nexport class Ng2UiAuth11Module {\n  static forRoot(configOptions?: IPartialConfigOptions, defaultJwtInterceptor = true): ModuleWithProviders<any> {\n    return {\n      ngModule: Ng2UiAuth11Module,\n      providers: [\n        ...(configOptions ? [{ provide: CONFIG_OPTIONS, useValue: configOptions }] : []),\n        { provide: ConfigService, useClass: ConfigService, deps: [CONFIG_OPTIONS] },\n        { provide: StorageService, useClass: BrowserStorageService, deps: [ConfigService] },\n        { provide: SharedService, useClass: SharedService, deps: [StorageService, ConfigService] },\n        { provide: LocalService, useClass: LocalService, deps: [HttpClient, SharedService, ConfigService] },\n        { provide: PopupService, useClass: PopupService, deps: [ConfigService] },\n        { provide: OauthService, useClass: OauthService, deps: [HttpClient, SharedService, ConfigService, PopupService] },\n        { provide: AuthService, useClass: AuthService, deps: [SharedService, LocalService, OauthService] },\n        ...(defaultJwtInterceptor\n          ? [{ provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true, deps: [SharedService, ConfigService] }]\n          : [])\n      ]\n    };\n  }\n}\n"]}